{% extends 'includes/admin_sidebar.html' %}
{% load static %}

{% block title %}Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/admin-dashboard-style.css' %}">
<link rel="icon" href="{% static 'images/favicon.png' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
        /* Ensure main content shifts to the right of sidebar */
    .dashboard-wrapper {
        display: flex;
    }
    .main-content {
        flex-grow: 1;
        padding: 20px;
        margin-left: 120px;
    }
    /* Ensure cards and table have proper spacing */
    .dashboard-card {
        min-height: 140px;
    }
</style>
{% endblock %}

{% block content %}
<!-- Mobile Menu Toggle Button -->
<button class="mobile-menu-toggle" id="mobile-menu-toggle">
    â˜°
</button>

<!-- Sidebar Overlay -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<div class="dashboard-wrapper d-flex">
    <!-- Main Content -->
    <div class="main-content flex-grow-1 ms-uto">
        <div class="container-fluid py-1">
            <!-- Title & Top Bar -->
            <div class="d-flex justify-content-between align-items-center">
                <h2 class="title mb-3 mb-md-0">Dashboard</h2>
                <div class="d-flex align-items-center gap-3">
                    <!-- Notification Bell -->
                    <a href="#" class="text-decoration-none position-relative" title="Announcements">
                        <img src="{% static 'images/notification.png' %}" alt="Notifications" width="30" height="30">
                        <div class="notification-badge"></div>
                    </a>
                </div>
            </div>

            <hr>
            <small><span id="date"></span></small>
            

            <!-- Statistic Boxes -->
            <div class="row g-4 mt-3">
                <!-- Students Card -->
                <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                    <div class="dashboard-card-container">
                        <div class="dashboard-card student p-4 h-100">
                            <div class="card-content">
                                <div class="card-left">
                                    <div class="icon-wrapper">
                                        <img src="{% static 'images/student.png' %}" alt="Student Icon" class="card-icon">
                                    </div>
                                    <div class="card-info">
                                        <h6 class="card-title">Student Accounts</h6>
                                        <small class="growth-text">
                                            <i class="fas fa-arrow-up"></i>
                                            {{ growth_percent }}%
                                        </small>
                                    </div>
                                </div>
                                <div class="card-right">
                                    <h1 class="card-number">{{ total_students }}</h1>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" 
                                     style="width: {{ growth_percent }}%" aria-valuenow="{{ growth_percent }}" 
                                     aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- University Personnel Card -->
                <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                    <div class="dashboard-card-container">
                        <div class="dashboard-card personnel p-4 h-100">
                            <div class="card-content">
                                <div class="card-left">
                                    <div class="icon-wrapper">
                                        <img src="{% static 'images/admin.png' %}" alt="Personnel Icon" class="card-icon">
                                    </div>
                                    <div class="card-info">
                                        <h6 class="card-title">University Personnel</h6>
                                        <small class="growth-text">
                                            <i class="fas fa-arrow-up"></i>
                                            {{ growth_percent }}%
                                        </small>
                                    </div>
                                </div>
                                <div class="card-right">
                                    <h1 class="card-number">{{ total_students }}</h1>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" 
                                     style="width: {{ growth_percent }}%" aria-valuenow="{{ growth_percent }}" 
                                     aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Card -->
                <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                    <div class="dashboard-card-container">
                        <div class="dashboard-card security p-4 h-100">
                            <div class="card-content">
                                <div class="card-left">
                                    <div class="icon-wrapper">
                                        <img src="{% static 'images/security.png' %}" alt="Security Icon" class="card-icon">
                                    </div>
                                    <div class="card-info">
                                        <h6 class="card-title">Security Accounts</h6>
                                        <small class="growth-text">
                                            <i class="fas fa-arrow-up"></i>
                                            {{ growth_percent }}%
                                        </small>
                                    </div>
                                </div>
                                <div class="card-right">
                                    <h1 class="card-number">{{ total_security }}</h1>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" 
                                     style="width: {{ growth_percent }}%" aria-valuenow="{{ growth_percent }}" 
                                     aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Card -->
                <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                    <div class="dashboard-card-container">
                        <div class="dashboard-card admin p-4 h-100">
                            <div class="card-content">
                                <div class="card-left">
                                    <div class="icon-wrapper">
                                        <img src="{% static 'images/admin.png' %}" alt="Admin Icon" class="card-icon">
                                    </div>
                                    <div class="card-info">
                                        <h6 class="card-title">Admin Accounts</h6>
                                        <small class="growth-text">
                                            <i class="fas fa-arrow-up"></i>
                                            {{ growth_percent }}%
                                        </small>
                                    </div>
                                </div>
                                <div class="card-right">
                                    <h1 class="card-number">{{ total_admin }}</h1>
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" 
                                     style="width: {{ growth_percent }}%" aria-valuenow="{{ growth_percent }}" 
                                     aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

             <!-- Vehicle Stats Section -->
            <div class="row g-4 mt-4">
                <div class="col-12">
                    <div class="vehicle-stats-container">
                        <div class="vehicle-hero-card p-5">
                            <!-- Header Section -->
                            <div class="vehicle-stats-header">
                                <div class="d-flex align-items-center gap-4">
                                    <!-- Vehicle Icon (Large) -->
                                    <div class="vehicle-icon-large">
                                        <i class="fas fa-car-side"></i>
                                    </div>
                                    <!-- Vehicle Stats Overview -->
                                    <div>
                                        <h3 class="vehicle-main-title">Vehicle Management Overview</h3>
                                        <div class="d-flex align-items-center mt-2">
                                            <span class="status-number me-3" 
                                                style="font-size: 2.5rem; font-weight: bold; letter-spacing: 2px;">
                                                {{ total_vehicles }}
                                            </span>
                                            <div>
                                                <span class="vehicle-subtitle" style="font-size: 1.2rem; color: var(--muted-text);">
                                                    Total Registered Vehicles
                                                </span>
                                                <span class="vehicle-update-info" style="font-size: 0.95rem; color: var(--muted-text);">
                                                    Last updated: {{ last_updated|default:'Today' }}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Main Stats Grid -->
                            <div class="vehicle-stats-grid">
                                <!-- Motor -->
                                <div class="vehicle-stat-item">
                                    <div class="stat-icon-wrapper motor">
                                        <i class="fas fa-motorcycle"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h2 class="stat-number">{{ total_motor }}</h2>
                                        <p class="stat-label">Motorcycles</p>
                                        <div class="stat-growth">
                                            <i class="fas fa-arrow-up"></i>
                                            <span>+{{ growth_percent }}%</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Car -->
                                <div class="vehicle-stat-item">
                                    <div class="stat-icon-wrapper car">
                                        <i class="fas fa-car"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h2 class="stat-number">{{ total_car }}</h2>
                                        <p class="stat-label">Cars</p>
                                        <div class="stat-growth">
                                            <i class="fas fa-arrow-up"></i>
                                            <span>+{{ growth_percent }}%</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Van -->
                                <div class="vehicle-stat-item">
                                    <div class="stat-icon-wrapper van">
                                        <i class="fas fa-shuttle-van"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h2 class="stat-number">{{ total_van }}</h2>
                                        <p class="stat-label">Vans</p>
                                        <div class="stat-growth">
                                            <i class="fas fa-arrow-up"></i>
                                            <span>+{{ growth_percent }}%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- End Main Content -->
</div> <!-- End Dashboard Wrapper -->

{% endblock %}

{% block extra_js %}
    <script src="{% static 'javascript/base.js' %}"></script>
    <script src="{% static 'javascript/Admin_Dashboard.js' %}"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
{% endblock %}